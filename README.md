#软件模拟PWM输出
##分支master：stm32f103系列芯片的软件模拟PWM输出
利用DMA1、TIM2、TIM3、TIM4，可以最多实现48通道的，精度1us的脉宽可调、相位可调、个数可调的PWM波形。

###控制策略：
>1、PWM有三组，每组16通道，每组的通道都在同一个GPIO上输出<br>
2、每组PWM占用两个通道的DMA和一个定时器，一个DMA通道更新GPIO的输出，另一个更新定时器的计数器<br>
3、每组PWM的16通道统一看待：在某个时间某些个通道电平会发生变化，此时就要触发一次DMA运送<br>
4、DMA是循环搬运模式；利用双缓冲，DMA在过半中断时计算第一个缓冲，传输完成时计算第二个缓冲

###注意事项：
>1、CPU在中断中计算未来PWM通道的状态，因此PWMStop()会略有延时<br>
2、能够输出的最多的通道、最高频率是有限的，取决于CPU的运算能力。在模拟器上估计，若只输出一个通道，则可以勉强达到1MHz；16通道都输出，在最坏情况下（16通道输出相同的波形）约可以达到100kHZ<br>
3、在c中嵌入了几条汇编，代码只认keil不认gcc。。。


##分支8051：51上的12路舵机PWM输出试验
芯片为STC15F2K系列，其定时器**可以自动重装载**，计数器有类似STM32的“影子寄存器”的存在，可以放心地在定时器运行时改写计数器。<br>

###控制策略：
>1、将整个周期分成三份：0.6ms + 1.8ms + 17.5ms = 19.9ms，分别设置定时器值<br>
2、设定两个数组：12个PWM定时器变量以及它们的重装变量<br>
3、在前0.6ms部分，将所有输出都拉高，然后延时<br>
4、在1.8ms部分，每隔10us中断一次，遍历所有PWM定时器并递减，如果为零则拉低该通道的输出值<br>
5、最后17.5ms部分是单纯的延时


**为了最大程度提高效率，PWM部分用汇编编写，并且遍历PWM的部分只用顺序结构而不用循环**
